function onChangeHandler({
  errors,
  fieldsMap,
  values,
  readonlyFields = [
    "executor_contact",
    "executor_phone",
    "executor_eMail",
    "exporterCheckingAccount",
    "exporterAccount",
    "exporterBik",
    "exporterBankName",
    "exporterCorrAccount",
    "exporterUser",
    "exporterSignerLastName",
    "exporterSignerFirstName",
    "exporterSignerMiddleName",
    "exporterSignerFullName",
    "exporterSignerRFullName",
    "exporterSignerPosition",
    "exporterSignerRPosition",
    "exporterSignerAuthority",
    "exporterSignerLOANumber",
    "exporterSignerLOADate",
    "exporterContractNotification",
    "specialistEscCheckingAccount",
    "specialistEscBik",
    "specialistEscAccount",
    "specialistEscBankName",
    "specialistEscCorrAccount",
    "specialistEscUser",
    "specialistEscSignerLastName",
    "specialistEscSignerFirstName",
    "specialistEscSignerMiddleName",
    "specialistEscSignerFullName",
    "specialistEscSignerRFullName",
    "specialistEscSignerPosition",
    "specialistEscSignerRPosition",
    "specialistEscSignerAuthority",
    "specialistEscSignerLOANumber",
    "specialistEscSignerLOADate",
    "specialistEscContractNotification",
    "codeOkved",
    "codeTnved",
    "productSelectionButtons",
    "productCatalog",
    "serviceCatalog",
    "productTnvdName",
    "serviceOKVEDName",
    "productCaption",
    "serviceCaption",
    "productTnvd",
    "serviceOkved",
    "productDescription",
    "productCountry",
    "cost",
    "selectedCurrency",
    "replyStatus",
    "serviceTermComment",
    "exemptionObligationPayNDS",
    "accountingWithRussianTaxAuthorities",
    "articleNK",
    "serviceCost",
    "currency",
    "NDSOff",
    "NDSOn",
    "accountingWithRussianTaxAuthoritiesNDSOn",
    "costComment",
    "prepayment",
    "dueDate",
    "serviceTerm",
    "responseCreationDate",
    "country",
    "export",
    "productTooltip",
    "productTable",
    "serviceTable",
    "null",
    "certifiedProduction",
    "attachCertificatesProduction",
    "informationAboutFees",
    "intelPropPatent",
    "experienceExportDeliveries",
    "accountingWithRussianTaxAuthoritiesNDSOff",
    "exportCountries",
    "exportVolume",
    "deliveryConditions",
    "settlementProcedureWishes",
    "buyerSettlements",
    "prepaymentPercent",
    "isReadySend",
    "prepaymentTermDate",
    "minimumExpectedExportDelivery",
    "minimumExpectedExportDeliveryUnit",
    "EXWorksProductPrice",
    "expectedContractPrice",
    "amountt",
    "manufacturer",
    "employeeNegotiationsForeignLanguage",
    "discusionLanguage",
    "mainCompetitors",
    "targetCustomerPortrait",
    "additionalMaterials",
    "additionalInformation",
    "serviceTooltip",
    "executor_contact",
    "executor_phone",
    "executor_eMail",
    "exporterCheckingAccount",
    "exporterAccount",
    "exporterBik",
    "exporterBankName",
    "exporterCorrAccount",
    "exporterUser",
    "exporterSignerLastName",
    "exporterSignerFirstName",
    "exporterSignerMiddleName",
    "exporterSignerFullName",
    "exporterSignerRFullName",
    "exporterSignerPosition",
    "exporterSignerRPosition",
    "exporterSignerAuthority",
    "exporterSignerLOANumber",
    "exporterSignerLOADate",
    "exporterContractNotification",
    "specialistEscCheckingAccount",
    "specialistEscBik",
    "specialistEscAccount",
    "specialistEscBankName",
    "specialistEscCorrAccount",
    "specialistEscUser",
    "specialistEscSignerLastName",
    "specialistEscSignerFirstName",
    "specialistEscSignerMiddleName",
    "specialistEscSignerFullName",
    "specialistEscSignerRFullName",
    "specialistEscSignerPosition",
    "specialistEscSignerRPosition",
    "specialistEscSignerAuthority",
    "specialistEscSignerLOANumber",
    "specialistEscSignerLOADate",
    "specialistEscContractNotification",
    "codeOkved",
    "codeTnved",
    "productSelectionButtons",
    "productCatalog",
    "serviceCatalog",
    "productTnvdName",
    "serviceOKVEDName",
    "productCaption",
    "serviceCaption",
    "productTnvd",
    "serviceOkved",
    "productDescription",
    "productCountry",
    "cost",
    "selectedCurrency",
    "responseCreationDate",
    "replyStatus",
    "country",
    "serviceTermComment",
    "export",
    "productTooltip",
    "exemptionObligationPayNDS",
    "productTable",
    "accountingWithRussianTaxAuthorities",
    "serviceTable",
    "articleNK",
    "null",
    "certifiedProduction",
    "serviceCost",
    "attachCertificatesProduction",
    "currency",
    "informationAboutFees",
    "NDSOff",
    "intelPropPatent",
    "NDSOn",
    "experienceExportDeliveries",
    "accountingWithRussianTaxAuthoritiesNDSOff",
    "exportCountries",
    "accountingWithRussianTaxAuthoritiesNDSOn",
    "exportVolume",
    "costComment",
    "deliveryConditions",
    "settlementProcedureWishes",
    "prepayment",
    "buyerSettlements",
    "prepaymentPercent",
    "isReadySend",
    "prepaymentTermDate",
    "minimumExpectedExportDelivery",
    "serviceTerm",
    "minimumExpectedExportDeliveryUnit",
    "dueDate",
    "EXWorksProductPrice",
    "expectedContractPrice",
    "amountt",
    "manufacturer",
    "employeeNegotiationsForeignLanguage",
    "discusionLanguage",
    "mainCompetitors",
    "targetCustomerPortrait",
    "additionalMaterials",
    "additionalInformation",
    "serviceTooltip",
    "isGroupCompany",
    "serviceTooltip",
    "productTooltip",
    "term",
    "submitAffiliated",
    "generalDirector",
    "innCPE",
    "nameCPE",
    "addInfo",
    "phone",
    "eMail",
    "contact",
    "dateAgreement",
    "numberAgreement",
    "nameServicesInAgreement",
    "isAgreement",
    "conditionsSupport",
    "fullCompanyName",
    "shortCompanyName",
    "inn",
    "kpp",
    "ogrn",
    "ogrnIp",
    "registrationYear",
    "startingYearExportActivity",
    "companyDirector",
    "fullJobTitleCompanyDirector",
    "groupCompanyName",
    "juridicalAddress",
    "actualAddress",
    "codeOkved",
    "codeTnved",
    "productSelectionButtons",
    "productCatalog",
    "serviceCatalog",
    "serviceOKVEDName",
    "productTnvdName",
    "serviceCaption",
    "export",
    "productCaption",
    "productTnvd",
    "serviceOkved",
    "productDescription",
    "productCountry",
    "KR_TABLE_country",
    "nameTable",
    "reg_country",
    "usa",
    "eu",
    "nameServices",
    "responsePeriod",
    "attachAgreement",
    "country",
    "productTable",
    "serviceTable",
    "productsScope",
    "certifiedProduction",
    "attachCertificatesProduction",
    "informationAboutFees",
    "intelPropPatent",
    "experienceExportDeliveries",
    "exportCountries",
    "exportVolume",
    "deliveryConditions",
    "settlementProcedureWishes",
    "buyerSettlements",
    "buyerSettlements_other",
    "isReadySend",
    "minimumExpectedExportDelivery",
    "minimumExpectedExportDeliveryUnit",
    "expectedContractPrice",
    "EXWorksProductPrice",
    "amountt",
    "manufacturer",
    "employeeNegotiationsForeignLanguage",
    "discusionLanguage",
    "mainCompetitors",
    "targetCustomerPortrait",
    "additionalMaterials",
    "additionalInformation",
    "executor_contact",
    "executor_phone",
    "executor_eMail",
    "exporterCheckingAccount",
    "exporterAccount",
    "exporterBik",
    "exporterBankName",
    "exporterCorrAccount",
    "exporterUser",
    "exporterSignerLastName",
    "exporterSignerFirstName",
    "exporterSignerMiddleName",
    "exporterSignerFullName",
    "exporterSignerRFullName",
    "exporterSignerPosition",
    "exporterSignerRPosition",
    "exporterSignerAuthority",
    "exporterSignerLOANumber",
    "exporterSignerLOADate",
    "exporterContractNotification",
    "specialistEscCheckingAccount",
    "specialistEscBik",
    "specialistEscAccount",
    "specialistEscBankName",
    "specialistEscCorrAccount",
    "specialistEscUser",
    "specialistEscSignerLastName",
    "specialistEscSignerFirstName",
    "specialistEscSignerMiddleName",
    "specialistEscSignerFullName",
    "specialistEscSignerRFullName",
    "specialistEscSignerPosition",
    "specialistEscSignerRPosition",
    "specialistEscSignerAuthority",
    "specialistEscSignerLOANumber",
    "specialistEscSignerLOADate",
    "specialistEscContractNotification",
    "providerResponse",
    "rejectionReason",
    "exemptionObligationPayNDS",
    "accountingWithRussianTaxAuthorities",
    "articleNK",
    "serviceCost",
    "currency",
    "NDSOff",
    "NDSOn",
    "accountingWithRussianTaxAuthoritiesNDSOn",
    "costComment",
    "prepayment",
    "dueDate",
  ],
}) {
  const updatedFields = { ...fieldsMap };
  const filedsValues = Object.values(updatedFields).reduce((acc, field) => {
    if (readonlyFields?.find((key) => key === field.id || key === field.name)) {
      return [...acc, field.id];
    }
    return [...acc];
  }, []);
  filedsValues.forEach((field) => {
    if (updatedFields[field] && !updatedFields[field]?.readonly) {
      updatedFields[field] =
        updatedFields[field].uiType === "krDropdown"
          ? {
              ...updatedFields[field],
              readonly: true,
              constraints: [],
              disabled: true,
              required: false,
            }
          : {
              ...updatedFields[field],
              readonly: true,
              constraints: [],
              required: false,
            };
    }
  });
  const updatedValues = { ...values };
  if (
    updatedValues?.serviceCost &&
    updatedValues?.penaltyAmount &&
    /^[0-9]+$/.test(updatedValues?.penaltyAmount)
  ) {
    updatedValues.amountIncludingPenalty =
      +updatedValues.serviceCost - +updatedValues.penaltyAmount;
  }
  return { updatedValues, updatedFields, updatedErrors: { ...errors } };
}
